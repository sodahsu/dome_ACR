<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>審核案件管理-列表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" crossorigin="anonymous">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#6C936D',
                        'secondary': '#3F5146',
                        'accent': '#417991',
                        'danger': '#DC3545',
                        'warning': '#EAD065',
                        'gray-light': '#F8F9FA',
                        'gray-medium': '#6C757D',
                        'gray-dark': '#495057',
                        'border': '#ADB5BD',
                        'green-light': '#C5E0C7',
                        'bg-light': '#F3F3F3'
                    },
                    fontFamily: {
                        'noto': ['Noto Sans TC', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-bg-light font-noto">
    <!-- 引入 header.html -->
    <div id="header"></div>
    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('header').innerHTML = html;
                // 手動初始化 header 功能
                if (window.initializeHeader) {
                    window.initializeHeader();
                }
            });
    </script>
    <script src="header-utils.js"></script>
    <main class="p-2 md:p-4 max-w-[1440px] mx-auto">
        <!-- 頁面標題 -->
        <div class="bg-white shadow-lg rounded-lg border-l-4 border-primary p-2 mb-4">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center px-2 md:px-4 py-2 gap-2">
                <h2 class="text-xl md:text-2xl font-bold text-secondary">審核案件管理</h2>
                <div class="flex items-center gap-1 text-gray-medium text-sm">
                    <span>首頁</span>
                    <span>/</span>
                    <span>案件管理</span>
                    <span>/</span>
                    <span class="text-primary font-bold">審核案件管理</span>
                </div>
            </div>
        </div>

        <!-- 查詢區塊 -->
        <div class="bg-white shadow-lg rounded-lg p-2 md:p-4 mb-4">
            <form>
                <div class="grid grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mb-4">
                    <div class="flex flex-col gap-2 col-span-2 lg:col-span-1">
                        <label class="text-secondary font-medium text-sm">依欄位查詢</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                            <option>立案編號</option>
                            <option>通報人</option>
                            <option>作業人員</option>
                            <option>作業廠商</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2 col-span-2 lg:col-span-1">
                        <label class="text-secondary font-medium text-sm">關鍵字</label>
                        <input type="text" placeholder="請輸入查詢關鍵字"
                            class="border border-border rounded px-3 py-2 text-gray-medium text-sm">
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-secondary font-medium text-sm">通報來源</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                            <option>119</option>
                            <option>19999</option>
                            <option>1959</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-secondary font-medium text-sm">鄉鎮</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-secondary font-medium text-sm">案件類型</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                            <option>捕蜂</option>
                            <option>捉蛇</option>
                            <option>動物救援</option>
                            <option>捉綠鬣蜥</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-secondary font-medium text-sm">進度</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                            <option>審核中</option>
                            <option>審核完成</option>
                            <option>審核退回</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label class="text-secondary font-medium text-sm">是否已點交</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                            <option>是</option>
                            <option>否</option>
                        </select>
                    </div>
                    <div class="flex flex-col gap-2 col-span-2 lg:col-span-1">
                        <label class="text-secondary font-medium text-sm">案件完成日期</label>
                        <div class="flex items-center gap-2">
                            <input type="date"
                                class="border border-border rounded px-3 py-2 text-gray-medium flex-1 text-sm">
                            <span class="text-black">～</span>
                            <input type="date"
                                class="border border-border rounded px-3 py-2 text-gray-medium flex-1 text-sm">
                        </div>
                    </div>
                    <div class="flex flex-col gap-2 col-span-2 lg:col-span-1">
                        <label class="text-secondary font-medium text-sm">物種</label>
                        <select class="border border-border rounded px-3 py-2 text-gray-medium bg-white text-sm">
                            <option>不拘</option>
                        </select>
                    </div>
                </div>
                <div class="border-t border-gray-300 pt-4">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button type="submit"
                            class="bg-primary text-white px-3 py-2 rounded flex items-center gap-1 justify-center text-sm">
                            <i class="fas fa-search fa-fw text-base"></i>
                            查詢
                        </button>
                        <button type="button"
                            class="bg-gray-medium text-white px-3 py-2 rounded flex items-center gap-1 justify-center text-sm">
                            <i class="far fa-list-alt fa-fw text-base"></i>
                            列出全部
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- 功能按鈕與表格 -->
        <div class="bg-white shadow-lg rounded-lg p-2 md:p-4 mb-4">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-3">
                <div class="flex flex-wrap gap-2 md:gap-4">
                    <button class="bg-primary text-white px-2 py-1 rounded text-sm flex items-center gap-1">
                        <i class="fas fa-plus fa-fw text-base"></i>
                        新增
                    </button>
                    <button
                        class="bg-white border border-primary text-primary px-2 py-1 rounded text-sm flex items-center gap-1"
                        id="batchHandoverBtn">
                        <i class="fas fa-paper-plane fa-fw text-base"></i>
                        批次點交
                    </button>
                    <button class="bg-danger text-white px-2 py-1 rounded text-sm flex items-center gap-1">
                        <i class="fas fa-trash-alt fa-fw text-base"></i>
                        刪除
                    </button>
                </div>
                <div class="flex flex-wrap gap-2 md:gap-4">
                    <button class="bg-accent text-white px-2 py-1 rounded text-sm flex items-center gap-1">
                        <i class="fas fa-file-export fa-fw text-base"></i>
                        匯出
                    </button>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full border-collapse text-xs md:text-sm min-w-[1000px]">
                    <thead>
                        <tr class="bg-green-light">
                            <th class="border-b border-gray-200 p-2 align-middle text-center w-12">
                                <input type="checkbox" id="selectAllCheckbox" class="w-4 h-4 mx-auto">
                            </th>
                            <th class="border-b border-gray-200 p-2 text-center font-bold">序號</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">通報來源</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">立案編號</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">鄉鎮</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">案件類型</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">物種</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">作業人員</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">進度</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">是否已點交</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">異常</th>
                            <th class="border-b border-gray-200 p-2 text-left font-bold">通報時間</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="hover:bg-green-50">
                            <td class="border-b border-gray-200 p-2 align-middle text-center"><input type="checkbox"
                                    class="row-checkbox w-4 h-4 mx-auto"></td>
                            <td class="border-b border-gray-200 p-2 text-center">1</td>
                            <td class="border-b border-gray-200 p-2">119</td>
                            <td class="border-b border-gray-200 p-2"><a href="ReviewCaseManagement_Edit.html"
                                    class="text-primary hover:underline">T1130701001</a></td>
                            <td class="border-b border-gray-200 p-2">屏東市</td>
                            <td class="border-b border-gray-200 p-2">捕蜂</td>
                            <td class="border-b border-gray-200 p-2">長腳蜂</td>
                            <td class="border-b border-gray-200 p-2">王大明</td>
                            <td class="border-b border-gray-200 p-2"><span class="flex items-center gap-2"><i
                                        class="fas fa-check text-primary text-xl"></i>審核完成</span></td>
                            <td class="border-b border-gray-200 p-2">是</td>
                            <td class="border-b border-gray-200 p-2 text-center"><i
                                    class="fas fa-exclamation-circle fa-fw text-warning text-base cursor-pointer"
                                    title="異常說明"></i></td>
                            <td class="border-b border-gray-200 p-2">2025/07/10 09:12:01</td>
                        </tr>
                        <tr class="bg-gray-light hover:bg-green-50">
                            <td class="border-b border-gray-200 p-2 align-middle text-center"><input type="checkbox"
                                    class="row-checkbox w-4 h-4 mx-auto"></td>
                            <td class="border-b border-gray-200 p-2 text-center">2</td>
                            <td class="border-b border-gray-200 p-2">1999</td>
                            <td class="border-b border-gray-200 p-2"><a href="ReviewCaseManagement_Edit.html"
                                    class="text-primary hover:underline">T1130701002</a></td>
                            <td class="border-b border-gray-200 p-2">潮州鎮</td>
                            <td class="border-b border-gray-200 p-2">捉蛇</td>
                            <td class="border-b border-gray-200 p-2">赤尾青竹絲</td>
                            <td class="border-b border-gray-200 p-2">林美玉</td>
                            <td class="border-b border-gray-200 p-2"><span class="flex items-center gap-2"><i
                                        class="fas fa-history text-primary text-xl"></i>審核中</span></td>
                            <td class="border-b border-gray-200 p-2">否</td>
                            <td class="border-b border-gray-200 p-2 text-center"><i
                                    class="fas fa-check-circle fa-fw text-primary text-base cursor-pointer"
                                    title="正常"></i></td>
                            <td class="border-b border-gray-200 p-2">2025/07/09 14:22:11</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- 分頁 -->
        <div class="bg-white shadow-lg rounded p-2 md:p-4">
            <div class="flex flex-col sm:flex-row sm:justify-center sm:items-center gap-2 text-xs md:text-sm">
                <div class="flex items-center gap-2 justify-center">
                    <span>每頁</span>
                    <select class="border border-border rounded px-2 py-1 text-xs md:text-sm w-16">
                        <option>10</option>
                        <option>25</option>
                        <option>50</option>
                        <option>100</option>
                    </select>
                    <span>筆</span>
                </div>
                <div class="flex items-center gap-2 justify-center">
                    <span>第 1/1 頁，共 2 筆</span>
                </div>
                <div class="flex items-center gap-2 justify-center">
                    <a href="#" class="text-primary hover:underline">上一頁</a>
                    <span>｜跳至第</span>
                    <input type="number"
                        class="border border-border rounded px-2 py-1 text-xs md:text-sm w-14 text-center" value="1"
                        min="1" max="1">
                    <span>頁｜</span>
                    <a href="#" class="text-primary hover:underline">下一頁</a>
                </div>
            </div>
        </div>
    </main>
    <script>
        // 全選/全不選功能
        document.addEventListener('DOMContentLoaded', function () {
            const selectAll = document.getElementById('selectAllCheckbox');
            const rowCheckboxes = document.querySelectorAll('.row-checkbox');
            if (selectAll) {
                selectAll.addEventListener('change', function () {
                    rowCheckboxes.forEach(cb => {
                        cb.checked = selectAll.checked;
                    });
                });
            }
            // 若有行checkbox變動，更新全選狀態
            rowCheckboxes.forEach(cb => {
                cb.addEventListener('change', function () {
                    const allChecked = Array.from(rowCheckboxes).every(c => c.checked);
                    selectAll.checked = allChecked;
                });
            });

            // 批次點交彈跳視窗
            const batchBtn = document.getElementById('batchHandoverBtn');
            if (batchBtn) {
                batchBtn.addEventListener('click', function () {
                    // 檢查是否全選
                    const allChecked = Array.from(rowCheckboxes).every(c => c.checked);
                    if (allChecked) {
                        let modal = document.getElementById('batchHandoverModal');
                        if (!modal) {
                            modal = document.createElement('div');
                            modal.id = 'batchHandoverModal';
                            modal.style.position = 'fixed';
                            modal.style.top = '0';
                            modal.style.left = '0';
                            modal.style.width = '100vw';
                            modal.style.height = '100vh';
                            modal.style.background = 'rgba(0,0,0,0.5)';
                            modal.style.display = 'flex';
                            modal.style.justifyContent = 'center';
                            modal.style.alignItems = 'center';
                            modal.style.zIndex = '99999';
                            modal.innerHTML = `
                                <div style="background:#fff;padding:32px 40px;border-radius:12px;box-shadow:0 2px 16px #0008;min-width:320px;display:flex;flex-direction:column;align-items:center;">
                                    <h2 style="font-size:1.25rem;font-weight:bold;margin-bottom:16px;">批次點交</h2>
                                    <div style="margin-bottom:24px;">
                                        <ul style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:12px;align-items:center;">
                                            <li style="font-size:1.15rem;">蜂巢Ｘ5個</li>
                                            <li style="font-size:1.15rem;">綠鬣蜥 (S) X 1</li>
                                        </ul>
                                    </div>
                                    <button id="confirmBatchHandoverModalBtn" style="background:#198754;color:#fff;padding:8px 32px;border:none;border-radius:10px;font-size:1.1rem;font-weight:bold;cursor:pointer;">確認點交</button>
                                </div>
                            `;
                            document.body.appendChild(modal);
                            document.getElementById('confirmBatchHandoverModalBtn').onclick = function () {
                                // 顯示打勾動畫
                                let checkModal = document.getElementById('batchHandoverCheckModal');
                                if (!checkModal) {
                                    checkModal = document.createElement('div');
                                    checkModal.id = 'batchHandoverCheckModal';
                                    checkModal.style.position = 'fixed';
                                    checkModal.style.top = '0';
                                    checkModal.style.left = '0';
                                    checkModal.style.width = '100vw';
                                    checkModal.style.height = '100vh';
                                    checkModal.style.background = 'rgba(0,0,0,0.3)';
                                    checkModal.style.display = 'flex';
                                    checkModal.style.justifyContent = 'center';
                                    checkModal.style.alignItems = 'center';
                                    checkModal.style.zIndex = '100000';
                                    checkModal.innerHTML = `
                                        <div style="background:#fff;padding:32px 40px;border-radius:12px;box-shadow:0 2px 16px #0008;display:flex;flex-direction:column;align-items:center;">
                                            <svg width="80" height="80" viewBox="0 0 80 80">
                                                <circle cx="40" cy="40" r="36" stroke="#198754" stroke-width="6" fill="none"/>
                                                <polyline points="24,44 38,58 58,30" stroke="#198754" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                    <animate attributeName="points" dur="0.8s" values="24,44 24,44 24,44;24,44 38,58 38,58;24,44 38,58 58,30" fill="freeze"/>
                                                </polyline>
                                            </svg>
                                            <div style="margin-top:16px;font-size:1.1rem;color:#198754;font-weight:bold;">批次點交成功</div>
                                        </div>
                                    `;
                                    document.body.appendChild(checkModal);
                                } else {
                                    checkModal.style.display = 'flex';
                                }
                                // 關閉原modal
                                modal.style.display = 'none';
                                // 1.2秒後自動關閉動畫
                                setTimeout(function () {
                                    checkModal.style.display = 'none';
                                }, 1200);
                            };
                            modal.onclick = function (e) {
                                if (e.target === modal) modal.style.display = 'none';
                            };
                        } else {
                            modal.style.display = 'flex';
                        }
                    }
                });
            }
        });
    </script>
</body>

</html>